(()=>{"use strict";var e="todos";function t(){var t=sessionStorage.getItem(e);return t?JSON.parse(t):[];}var o=function(o){var i=document.createElement("li");i.classList.add("todo-item");var s=document.createElement("span");s.innerText=o,s.classList.add("todo-text"),i.appendChild(s);var l=document.createElement("button");l.innerHTML="<i class=\"fas fa-check\"></i>",l.classList.add("todo-check-button"),l.addEventListener("click",function(o){return function(n){var i,s,l;n.preventDefault(),o.classList.toggle("todo-item_completed"),i=d(o).index,s=d(o).element,l=t(),s.classList.contains("todo-item_completed")?l[i].checked=!0:l[i].checked=!1,sessionStorage.setItem(e,JSON.stringify(l));};}(i)),i.appendChild(l);var a=document.createElement("button");return a.innerHTML="<i class=\"fas fa-trash\"></i>",a.classList.add("todo-remove-button"),a.addEventListener("click",function(o){return function(d){d.preventDefault(),o.classList.add("todo-item_fall"),o.addEventListener("transitionend",(function(){!function(o){var n=t(),d=Array.from(o.childNodes).find((function(e){return e.classList.contains("todo-text");}));if(d){var i=n.filter((function(e){return e.value!==d.innerText;}));sessionStorage.setItem(e,JSON.stringify(i));}}(o),o.remove(),n();}));};}(i)),i.appendChild(a),i;};function n(){var e=document.querySelector(".todo-select");document.querySelector(".todo-list").children.length?e.disabled=!1:(e.disabled=!0,e.selectedIndex=0);}function d(e){var t=0,o=e;return function e(o){o.previousElementSibling&&(console.log(o.previousElementSibling),t++,e(o.previousElementSibling));}(o),{index:t,element:o};}function i(){return{todoInput:document.querySelector(".todo-input"),todoHelper:document.querySelector(".todo-helper"),todoButton:document.querySelector(".todo-button")};}function s(){var e=i(),t=e.todoInput,o=e.todoHelper,n=e.todoButton;return t.value.length>=3?(n.classList.remove("todo-button_disabled"),o.classList.remove("todo-helper_visible"),!0):(n.classList.add("todo-button_disabled"),o.classList.add("todo-helper_visible"),!1);}var l=i(),a=l.todoInput,r=l.todoButton,c=document.querySelector(".todo-list"),u=document.querySelector(".todo-select"),v=document.querySelector(".todo-helper");document.addEventListener("DOMContentLoaded",(function(){t().forEach((function(e){var t=o(e.value);c.appendChild(t),e.checked&&t.classList.add("todo-item_completed");})),n();})),a.addEventListener("input",s),a.addEventListener("keydown",(function(e){if(13==e.keyCode)return!!s()||(e.preventDefault(),!1);})),a.addEventListener("focus",(function(){s()||v.classList.add("todo-helper_visible");})),a.addEventListener("blur",(function(){v.classList.remove("todo-helper_visible");})),r.addEventListener("click",(function(d){d.preventDefault();var s,l,r=o(a.value);c.appendChild(r),n(),s={value:a.value,checked:!1},(l=t()).push(s),sessionStorage.setItem(e,JSON.stringify(l)),function(){var e=i(),t=e.todoInput,o=e.todoHelper,n=e.todoButton;t.value="",n.classList.add("todo-button_disabled"),o.classList.add("todo-helper_visible");}();})),u.addEventListener("change",(function(e){var t,o;t=c.childNodes,o=e.target.value,t.length&&t.forEach((function(e){switch(o){case"completed":e.classList.contains("todo-item_completed")?e.style.display="flex":e.style.display="none";break;case"uncompleted":e.classList.contains("todo-item_completed")?e.style.display="none":e.style.display="flex";break;default:return void(e.style.display="flex");}}));}));})();